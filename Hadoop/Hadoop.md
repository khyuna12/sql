## Hadoop

### Hadoop Ecosystem
1. linux
2. Java(system)
3. Spark(Data Framework)
  - 스칼라: 더 빠름
  - 파이썬

#### HDFS

- **분산 파일 시스템**: 네트워크로 연결된 여러 머신의 스토리지 관리하는 파일 시스템

- 스트리밍 방식의 데이터 접근
- 높은 데이터 처리량 제공에 최적화: 응답시간 희생
  - 빠른 응답시간을 원한다면 HBASE가 대안
- 저장할 수 있는 파일 수는 네임노드의 메모리 용량에 좌우
- 단일 라이터: 파일에서 임의 위치에 있는 내용을 수정하는 것은 허용하지 않음
- **블록**: 한 번에 읽고 쓸 수 있는 데이터의 최대량
  - 파일 시스템 블록의 크기는 보통 수 킬로바이트, 디스크 블록의 크기는 512바이트
  - 사용자는 파일의 크기와 상관없이 파일을 읽고 쓸 수 있음
  - HDFS의 파일은 단일 디스크를 위한 파일 시스템처럼 특정 블록 크기의 chunk로 쪼개지고 각 chunk는 독립적으로 저장
  - 블록 크기보다 작은 데이터의 경우 전체 블록크기에 해당하는 하위 디스크를 모두 점유하지는 않음

- 네임노드와 데이터노드 + HDFS 클라이언트
  - HDFS 클러스터는 마스터-워커 패턴으로 동작(마스터: 하나의 네임노드, 워커: 여러개의 데이터 노드)
  - 네임노드
    - 파일시스템의 네임스페이스 관리
    - 파일시스템 트리와 그 트리에 포함된 모든 파일과 디렉터리에 대한 메타데이터 유지
    - 파일에 속한 모든 블록이 어느 데이터노드에 있는지 파악(위치 정보는 디스크에 영속적으로 저장X)
  - 데이터 노드
    - 파일 시스템의 실질적인 일꾼
    - 클라이언트나 네임노드의 요청이 있을 때 블록을 저장하고 탐색, 저장하고 있는 블록의 목록을 주기적으로 네임노드에 보고

#### MapReduce

- 맵 함수
  - 단지 데이터의 준비 단계로, 리듀스 함수를 위해 데이터 제공
  - 잘못된 레코드 거르기
- 각 행맵 함수의 출력이 리듀스 함수의 입력으로 보내지는 과정은 맵리듀스 프레임워크에 의해 처리
- 리듀스 함수
  - 리스트 전체 반복하여 최고 측정값 추출

- 단일 리듀스 태스크의 맵리듀스 데이터 흐름
![Alt text](image.png)

- 맵 리듀스 원리
  - Split
  - Map()
  - 셔플
  - Reduce()
  - output 저장 

<br>

#### 빅데이터 수집 기술
- **Sqoop** by 아파치
  - RDBMS와 HDFS간의 데이터 연동
  - 양방향: Import & Export
  - 다양한 DB로부터의 자료 이동 지원

- **Flume** by Cloudera
  - 분산 환경에서 방대한 양의 이벤트 로그 수집 후 전송
  - 오픈 소스 로그 수집 소프트웨어
  - 다양한 로그 데이터 수집 및 모니터링이 가능하며 실시간 전송을 지원
  - 자바로 구현되어 있어 다양한 운영체제에 설치가 가능
  - 장애에 쉽게 대처 가능
  - 아키텍처
    - 에이전트: 소스, 채널, 싱크로 구성
    - 개별 에이전트의 연결이 가능
  - 구성요소
    - 소스: 지정한 소스를 통해서 이벤트를 받아 채널로 전달
    - 채널: 일종의 큐로서 이벤트를 임시로 보관
    - 싱크: 채널에서 이벤트를 읽어와 출력 대상에 씀

- **Kafka** by Linkedin
  - 분산 시스템에서 메시지 전송 및 수집
  - 구성: Producer, Consumer, Broker
  

